
 <!DOCTYPE HTML>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  
    <title>关于价格条件中的小计 | Cheney Fan&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="Cheney Fan">
    
    <meta name="description" content="link : http://scn.sap.com/thread/1735194
Note 1022966 - FAQ for the ‘Subto’ column (KZWIW) in the pricing procedure
Symptom
Content overview:1. What e">
    
    
    
    
    <link rel="alternative" href="/atom.xml" title="Cheney Fan&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Cheney Fan&#39;s Blog">Cheney Fan&#39;s Blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜單">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:fyg.xyjp.net/about">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2013/12/22/关于价格条件中的小计 (Libran-Fyg の競合コピー 2014-08-01)/" title="关于价格条件中的小计" itemprop="url">关于价格条件中的小计</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://fyg.xyjp.net/about" title="Cheney Fan">Cheney Fan</a>
    </p>
  <p class="article-time">
    <time datetime="2013-12-22T01:13:32.000Z" itemprop="datePublished">12月 22 2013</time>
    更新日期:<time datetime="2014-03-30T02:11:52.000Z" itemprop="dateModified">3月 30 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目錄</strong>
		
		</div>
		
		<p>link : <a href="http://scn.sap.com/thread/1735194" title="scn" target="_blank">http://scn.sap.com/thread/1735194</a></p>
<p>Note 1022966 - FAQ for the ‘Subto’ column (KZWIW) in the pricing procedure</p>
<p>Symptom</p>
<p>Content overview:<br>1. What effect does an entry in the ‘Subto’ column<br>(KZWIW field) have?<br>2. Which settings are possible?<br>3. Which condition/subtotal line is taken into account?<br>4. In which cases is cumulation performed/not performed?<br>5. Which program contains the corresponding logic?<br>6. Are the cumulative values stored in the database?<br>7. Can inactive conditions also be taken into account?<br>8. Examples of how KZWIW is used<br>9. What you can do if the number of freely available subtotal fields in the KOMP (KZWI1 - KZWI6) is insufficient?<br>10. What you can do if the number of internal auxiliary variables<br>(XWORKD -XWORKM) is insufficient?</p>
<p>1. What effect does an entry in the ‘Subto’ column (KZWIW field) have?</p>
<p>You can make certain entries in the ‘Subto’ column (KZWIW field) in the Customizing settings for the pricing procedure. These determine that the condition value or the condition rate of the condition or subtotal line is copied into a certain field of the KOMP structure or into certain internal auxiliary variables (XWORKD - XWORKM). For more details, see Point 2 below.</p>
<p>2. Which settings are possible?</p>
<p>The following options are provided in R/3 standard pricing:</p>
<p>1 Value transfer to KOMP-KZWI1<br>2 Value transfer to KOMP-KZWI2<br>3 Value transfer to KOMP-KZWI3<br>4 Value transfer to KOMP-KZWI4<br>5 Value transfer to KOMP-KZWI5<br>6 Value transfer to KOMP-KZWI6<br>7 Value transfer to KOMP-BONBA (Rebate basis)<br>8 Value transfer to KOMP-PREVA (Preference value)<br>9 Value transfer to KOMP-BRTWR (Gross value)<br>A Price transfer to KOMP-CMPRE (Credit price)<br>B Price transfer to KOMP-WAVWR (Cost)<br>C Value transfer to KOMP-GRWRT (Statistical value)<br>D Value transfer to XWORKD<br>E Value transfer to XWORKE<br>F Value transfer to XWORKF<br>G Value transfer to XWORKG<br>H Value transfer to XWORKH<br>I Value transfer to XWORKI<br>J Value transfer to XWORKJ<br>K Price transfer to XWORKK<br>L Price transfer to XWORKL<br>M Price transfer to XWORKM<br>S Value transfer to KOMP-EFFWR (Effective value)<br>Y Value transfer to KOMP-OIIDC (IS-OIL/only JVA CRP Pricing)<br>Z Value transfer to KOMP-OIEBC (IS-OIL/only JVA CRP Pricing)</p>
<p>The following points apply in this case:<br>Value transfer = transfer of the condition value XKOMV-KWERT<br>Price transfer = transfer of the condition rate XKOMV-KBETR</p>
<p>3. Which condition/subtotal line is taken into account?</p>
<p>A condition is only taken into account if it is not inactive with one of the inactive indicators ‘AKLMXZ’.<br>For the settings ‘B’ (Cost), ‘C’ (Statistical value) and ‘9’ (Gross value), inactive conditions are not taken into account, even with ‘Y’.<br>It is of no consequence whether the condition is statistical or not.<br>Subtotal lines are always taken into account in the standard R/3 system because they never have an inactive indicator in R/3 standard pricing.</p>
<p>4. In which cases is cumulation performed/not performed?</p>
<p>a) With the ‘A’ setting (credit price), only the last line in the pricing result that has the setting ‘A’ and the satisfies the conditions specified in Point 3 below is taken into account (because multiple use of ‘A’ is permitted).<br>The credit price is always determined in the sales unit (VRKME). The condition price unit is always 1 in this case.</p>
<p>Example: If the sales unit is KG, the credit price is determined “per 1 KG”.</p>
<p>b) With all other settings, all lines that satisfy the conditions specified in Point 3 and have the relevant setting are taken into account, that is, the condition values of these lines are cumulated.</p>
<p>Note: With the settings ‘K’ and a ‘L’ (transfer of the condition rate), multiple use (= cumulation) is not useful in most cases.</p>
<p>5. Which program contains the corresponding logic?</p>
<p>The corresponding logic is contained in the SAPLV61A program in the FORM XKOMV_BEWERTEN (Include LV61AA55):</p>
<p>L O O P<br>LOOP AT xkomv.<br>…</p>
<p>calculate subtotals in KOMP<br>IF xkomv-kinak NA ‘AKLMXZ’.<br>…</p>
<p>fill subtotal work fields<br>CASE xkomv-kzwiw. &lt;== The setting for KZWIW<br>WHEN ‘ ‘. is checked in this<br>WHEN ‘A’. CASE statement.<br>…<br>WHEN ‘B’.<br>…<br>WHEN …<br>…<br>ENDCASE.<br>…<br>ENDIF.<br>…</p>
<p>L O O P<br>ENDLOOP.</p>
<p>6. Are the cumulative values stored in the database?</p>
<p>The values, that are included in the fields of the KOMP structure are returned from pricing (program SAPLV61A) to the calling program. The specific application determines whether the values are then stored in a database table with corresponding fields. This is the case in sales (table VBAP) and in the customer invoice (table VBRP), for example.<br>The XWORKD - XWORM fields are auxiliary variables. They are initialized at the start of a pricing evaluation (FORM XKOMV_BEWERTEN, Include LV61AA55) and their contents are lost at the latest on completion of the pricing call (exit of program SAPLV61A).</p>
<p>7. Can inactive conditions also be taken into account?</p>
<p>This is possible if you use a corresponding condition value formula.</p>
<p>Example: You want to cumulate all condition values of a condition ZZZZ in XWORKJ, even if they could be inactive due to a manual entry (KINAK = ‘M’).<br>You must create a condition value formula with the following source code:</p>
<p>if condition is active or inactive with ‘M’<br>IF xkomv-kinak NA ‘AKLXZ’.<br>xworkj = xworkj + xkwert. “cumulate condition value in xworkj<br>ENDIF.</p>
<p>The formula must be assigned to the condition ZZZZ in the pricing procedure.<br>In addition, the ‘J’ setting must be removed from the ‘Subto’ column to prevent the standard R/3 source code for cumulation (see Question 5) from being executed also. This is necessary so that active ZZZZ conditions are not cumulated twice by mistake.</p>
<p>Variant: If the formula contains the following source code, the setting ‘J’ must be retained in the ‘Subto’ column in the pricing procedure:</p>
<p>IF xkomv-kinak = ‘M’. “if condition is inactive with ‘M’<br>xworkj = xworkj + xkwert.”cumulate condition value in xworkj<br>ENDIF.</p>
<p>In this case, the inactive conditions with the setting ‘M’ are cumulated in the formula and the active conditions are cumulated in the R/3 standard source code.</p>
<p>8. Examples of how KZWIW is used:</p>
<p>a) In purchase price calculation schema RM0000, the condition value of the statistical condition EDI1 is copied to XWORKD. For the next condition EDI2, the condition value is calculated with the condition value formula 040 (Include FV64A040) as the difference between XWORKD and the accured net value.</p>
<p>b) A percentage condition ZZ13 refers to three previous conditions ZZ02, ZZ04 and ZZ07, which do not appear in a direct sequence in the pricing procedure. In this case, it is not possible to cumulate the condition values of these three conditions using from-to steps (see Note 834174). However, you can cumulate the condition values of the three conditions ZZ02, ZZ04 and ZZ07 in XWORKL, for example, by setting ‘L’ in the pricing procedure for all three conditions. In addition, you must create a condition base formula for the ZZ13 condition, which copies the content of XWORKL as a condition basis:</p>
<p>use the content of xworkl as condition basis<br>xkwert = xworkl.</p>
<p>9. What you can do if the number of freely available subtotal fields in the KOMP (KZWI1 - KZWI6) is insufficient</p>
<p>An enhancement is possible as part of a modification. For more details, see Note 155012.</p>
<p>Note:<br>With 155012, the imported fields (for example, KOMP-ZZWI11) must be filled in each case using a condition value formula. However, to maintain a corresponding setting for the field name in the ‘Subto’ column of the pricing procedure (‘11’), the modifications in this note are insufficient.<br>Why are further modifications not recommended?</p>
<p>a) Firstly, the value range of the R/3 standard data element KZWIW would have to be extended with the value ‘11’ (transaction SE11). However, the KZWIW data element has only one character. Therefore, the two-digit value ‘11’ is not possible.<br>You can only assign a vaule other than the values listed under Point 2 above (for example, N, O, P).</p>
<p>b) In addition, the source code of the R/3 standard routine FORM XKOMV_BEWERTEN (Include LV61AA55) would have to be modified by including a relevant branch in the CASE statement from Question 5, for example:</p>
<p>WHEN ‘N’. “ modification: ‘N’<br>ADD xkomv-kwert TO komp-zzwi11. “ cumulates in field zzwi11</p>
<p>10. What you can do if the number of internal auxiliary variables (XWORKD -XWORKM) is insufficient</p>
<p>An enhancement is possible as part of a modification. For this purpose, a corresponding data declaration must be made in the LV61ATOP Top Include of the SAPLV61A program, for example:</p>
<p>additional work field for xkomv_bewerten<br>DATA: zwork1 LIKE komv-kwert,</p>
<p>You must then also fill the zwwork1 auxiliary variable using a condition value formula (see Question 9).</p>
<p>Other terms</p>
<p>KZWIW<br>Reason and Prerequisites</p>
<p>These problems are due to the design of R/3 pricing.<br>Solution</p>
<p>This is a consulting note. Other inquiries relating to the functions described above do not fall within the scope of ‘Support’, and are instead processed as part of consulting, which is subject to a separate charge.</p>
  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/sap/">sap</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/SAP/">SAP</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://fyg.xyjp.net/about/2013/12/22/关于价格条件中的小计 (Libran-Fyg の競合コピー 2014-08-01)/" data-title="关于价格条件中的小计 | Cheney Fan&#39;s Blog" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2013/12/22/关于价格条件中的小计/" title="关于价格条件中的小计">
  <strong>PREVIOUS:</strong><br/>
  <span>
  关于价格条件中的小计</span>
</a>
</div>


<div class="next">
<a href="/2013/12/20/sap-定价条件/"  title="sap 定价条件">
 <strong>NEXT:</strong><br/> 
 <span>sap 定价条件
</span>
</a>
</div>

</nav>

	
<section id="comments" style="padding:35px;">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="顯示側邊欄"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目錄</strong>
  
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隱藏側邊欄"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分類</p>
		<ul>
		
			<li><a href="/categories/Develop/" title="Develop">Develop<sup>19</sup></a></li>
		
			<li><a href="/categories/SAP/" title="SAP">SAP<sup>15</sup></a></li>
		
			<li><a href="/categories/Tips/" title="Tips">Tips<sup>2</sup></a></li>
		
			<li><a href="/categories/生活/" title="生活">生活<sup>16</sup></a></li>
		
			<li><a href="/categories/社会/" title="社会">社会<sup>2</sup></a></li>
		
			<li><a href="/categories/设计/" title="设计">设计<sup>12</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">標簽</p>
		<ul class="clearfix">
		
			<li><a href="/tags/CSS/" title="CSS">CSS<sup>1</sup></a></li>
		
			<li><a href="/tags/Github/" title="Github">Github<sup>2</sup></a></li>
		
			<li><a href="/tags/JAVA/" title="JAVA">JAVA<sup>1</sup></a></li>
		
			<li><a href="/tags/Lamy/" title="Lamy">Lamy<sup>1</sup></a></li>
		
			<li><a href="/tags/Melancholia/" title="Melancholia">Melancholia<sup>1</sup></a></li>
		
			<li><a href="/tags/RSS/" title="RSS">RSS<sup>1</sup></a></li>
		
			<li><a href="/tags/angularjs/" title="angularjs">angularjs<sup>2</sup></a></li>
		
			<li><a href="/tags/chrome开发/" title="chrome开发">chrome开发<sup>1</sup></a></li>
		
			<li><a href="/tags/designing/" title="designing">designing<sup>5</sup></a></li>
		
			<li><a href="/tags/ffmpeg/" title="ffmpeg">ffmpeg<sup>2</sup></a></li>
		
			<li><a href="/tags/html5/" title="html5">html5<sup>1</sup></a></li>
		
			<li><a href="/tags/javascript/" title="javascript">javascript<sup>4</sup></a></li>
		
			<li><a href="/tags/linux/" title="linux">linux<sup>2</sup></a></li>
		
			<li><a href="/tags/mac/" title="mac">mac<sup>1</sup></a></li>
		
			<li><a href="/tags/rails/" title="rails">rails<sup>1</sup></a></li>
		
			<li><a href="/tags/sap/" title="sap">sap<sup>15</sup></a></li>
		
			<li><a href="/tags/wordpress/" title="wordpress">wordpress<sup>1</sup></a></li>
		
			<li><a href="/tags/デッサン/" title="デッサン">デッサン<sup>2</sup></a></li>
		
			<li><a href="/tags/动画/" title="动画">动画<sup>1</sup></a></li>
		
			<li><a href="/tags/情感/" title="情感">情感<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 訂閱</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2014 
		
		<a href="http://fyg.xyjp.net/about" target="_blank" title="Cheney Fan">Cheney Fan</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>

<script>
  var disqus_shortname = 'xyjp';
  
  var disqus_url = 'http://fyg.xyjp.net/about/2013/12/22/关于价格条件中的小计 (Libran-Fyg の競合コピー 2014-08-01)/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>






  </body>
</html>
